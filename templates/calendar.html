{% extends "base.html" %}
{% block content %}
<section class="calendar-wrapper">
  <!-- Month Header -->
  <header class="calendar-controls">
    <button class="nav-btn" id="prev-month">â€¹</button>
    <div class="calendar-title">
      <span id="month-year">{{ today.strftime("%B %Y") }}</span>
    </div>
    <button class="nav-btn" id="next-month">â€º</button>
  </header>

  <!-- Days Header -->
  <div class="calendar-days-header">
    <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
  </div>

  <!-- Interactive Calendar Grid -->
  <div class="calendar-grid" id="calendar-grid">
    <!-- Days will be generated by JavaScript -->
  </div>

  <!-- Add Event Bar -->
  <section class="action-bar">
    <button class="primary-button" id="open-event-form-btn">+ Add Event</button>
  </section>

  <!-- New Event Form -->
  <section class="new-post-panel" id="new-event-panel">
    <form method="post" class="new-post-form" id="event-form">
      <input name="title" placeholder="Event title" required />
      <input name="datetime" id="event-datetime" placeholder="Date & Time (e.g. Jan 27 at 15:00)" required />
      <input name="location" placeholder="Location (e.g. Engineering 405)" />
      <div class="form-actions">
        <button type="button" class="secondary-button" id="cancel-event-btn">Cancel</button>
        <button type="submit" class="primary-button">Save Event</button>
      </div>
    </form>
  </section>

  <!-- Today's Events -->
  <section class="event-list">
    <h2 class="section-title">Upcoming Events</h2>
    {% for event in events %}
    <article class="event-card" data-date="{{ event.datetime.split(' at ')[0] }}">
      <div class="event-title">{{ event.title }}</div>
      <div class="event-meta">
        <span>ğŸ•’ {{ event.datetime }}</span>
        <span>ğŸ“ {{ event.location }}</span>
      </div>
      <div class="event-shared">Shared by {{ event.shared_by }}</div>
    </article>
    {% else %}
    <p class="empty-text">No events yet. Add one by clicking a date!</p>
    {% endfor %}
  </section>
</section>

<script>
  // Calendar data passed from Flask
  window.events = {{ events|tojson|safe }};
</script>
{% endblock %}